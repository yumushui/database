# Message Queue Master Class

消息队列高手课

从源码角度全面解析MQ的设计和实现

## You will get

+ 熟练掌握消息队列的时间应用；
+ 深入理解消息队列底层设计思想；
+ 从源码入手分析解决问题的方法；
+ 消息队列的应用实战。

## The teacher introduction

李玥，京东零售技术架构部资深架构师，负责主导设计新一代京东消息队列产品： JMQ。李玥从事互联网研发、架构十余年，在 流数据的一致性分发和可靠存储，分布式实时计算、高可用分布式系统架构等技术领域有丰富经验。

## The course introduction

消息队列中间价的使用并部复杂，但如果你对消息队列不熟悉，很难构建出健壮、稳定并且高性能的企业级系统，你 会面临很多实际问题：

+ 如何选择最适合系统的消息队列产品？
+ 如何保证消息不重复、不丢失？
+ 如何做到水平扩展？

如果你掌握了消息队列的底层技术，无论使用哪种消息队列产品，你都可以从原理层面来分析问题，在简单看一下 它的API和相关配置项，就能很快知道该如何配置消息队列，写出高性能并且可靠的程序。

在这个课程中，李玥将从源码的角度带你了解消息队列，让你具备从源码角度分析和解决实际问题的能力，并且借由消息队列的底层技术，带你了解其优秀的设计思想，理解各种“轮子”的实现原理，提升你的编程能力。

此外，消息队列本身功能简洁、结构清晰，入门简单且有足够的深度，作为使用最广泛的中间价，涉及的底层技术非常全面，非常适合用来深入分析和学习分布式系统等一些复杂的相关技术，让你一通百通。

## The module introduction

本课程有3大模块。

+ **基础篇**

以讲解消息队列的使用方式和最佳实践为主，包括消息队列基础知识、技术选型、高级功能等，给出消息队列应用过程中常见问题的解决策略。

+ **进阶篇**

深入到源码中去，探讨消息队列的实现原理，拓展知识深度。在这个模块的前半部分，每篇对 异步模型、高性能的底层网络通信等知识点进行探讨，这些知识点不仅是中间价开发人员必须掌握的，而且也是各大厂面试题中的常考内容。后半部分每篇会选择一个开源的消息队列，针对一个功能特性，讲解它的实现原理，以及源代码中优秀的设计思想和好的编程技巧。

+ **案例篇**

应用前两个模块学到的知识，一起做两个微型服务，体验实际的代码开发。第一个微项目，用消息队列和流计算框架来实现一个流计算任务；第二个微项目，实现一个最简单的RPC框架，因为开发中间件用到的很多技术都是互通的，开发消息队列的技术同样可以用于开发RPC框架。

## The course catalog

《消息队列高手课》

```
https://time.geekbang.org/column/intro/212
```


### 课前必读
```
开篇词  优秀的程序员，你的技术栈中不能只有“增删改查”

预习  怎样更好地学习这门课

```

### 基础篇
```
01 为什么需要消息队列

02 该如何选择消息队列

03 消息模型： 主题和队列有什么区别？

04 如何利用事务消息实现分布式事务？

05 如何确保数据不会丢失？

06 如何处理消费过程中的重复消息？

07 消息积压来该如何处理？

08 热点问题答疑

```

### 进阶篇
```
09 学习开源代码该如何入手？

10 如何使用异步设计提升系统性能？

11 如何实现高性能的异步网络传输？

12 序列化和反序列化：如何通过网络传输结构化的数据？

13 传输协议： 应用程序之间对话的语言

14 内存管理： 如何避免内存溢出和频繁的垃圾回收？

15 Kafka 如何实现高性能IO？

16 缓存策略： 如何使用缓存来减少磁盘 IO？

17 如何正确使用锁保护共享数据，协调异步线程？

18 如何用硬件同步原语（CAS）替代锁？

19 数据压缩： 时间换空间的游戏

20 Rocket Producter 源码分析： 消息生产的实现过程

21 Kafka Consumer 源码分析： 消息消费的实现过程

22 Kafka 和 RocketMQ 的消息复制实现的差异点在哪？

23 RocketMQ 客户端如何在集群中找到正确的节点？

24 Kafka 的 协调服务 Zookeeper： 实现分布式的“瑞士军刀”

25 RocketMQ 和 Kafka 如何实现事务？

26 MQTT协议： 如何支持海量在线 IoT 设备？

27 Pulsar 的存储计算分离设计： 全新的消息队列设计思路

28 热点问题答疑

```

### 案例篇
```
29 流计算与消息（一）： 通过 Flink 理解流计算的原理

30 流计算与消息（二）： 在流计算中使用 Kafka 链接计算任务

31 动手实现一个简单的 RPC 框架（一）： 原理和程序的结构

32 动手实现一个简单的 RPC 框架（二）： 通信和序列化

33 动手实现一个简单的 RPC 框架（三）： 客户端

34 动手实现一个简单的 RPC 框架（四）： 服务端

35 热点问题答疑

```

### 测试篇
```
期中测试  10个消息队列热点问题自测

期末测试  消息队列100分试卷等你来挑战！

```

### 结束语
```
结束语  程序员如何构建知识体系？

第二季回归  这次我们一起实战后端存储


```


## 知识体系

整个技术体系可以理解为一个超大的倒立的锥形体，上大下小。这个锥形，越靠上越偏重与应用，或者越偏重与业务，越 靠下，越偏重于基础技术和理论。整个技术知识结构是这样的模式，组成这个技术模型的每个技术点也是呈现这样的状态。比如消息队列，就死机整个技术体系中的一个小块，它也是一个倒立的锥形。


倒锥形的整个技术体系

![message_queue_map]( https://github.com/yumushui/database/tree/master/message_queue/message_queue_master_class/message_queue_map.jpg "message_queue_map")

那一个好的、成体系的技术栈，应该是怎么样嗯？应该是，**“基础深厚，涉猎广泛，融会贯通”**。

把个人的技术栈放到大锥形体中，应该像一个头向下倒立的鱿鱼。鱿鱼的脑袋又大又尖，须子 又多又长。把鱿鱼倒过来，脑袋要尽量塞满这个大锥形的底部，也就是说，底层的大部分基础知识都要掌握。

向上延伸的很多触手，代表整个技术体系的最上层的众多领域中，其中的几个领域你也是要掌握的。并且，自上向下不要又断层，上层你掌握的技术不能只浮于表面，而是要足够深入，**深入到于你掌握的底层技术连通起来**，代表你的知识体系是贯通的。

比如，你写了一段代码，往数据库中写了一条数据。编写的程序，在运行时怎么存储和传输这条数据的？数据是如何从你的程序传递给数据库的？数据在数据库中是如何处理并存储的？数据库又是怎么把数据保存到磁盘上的？数据在磁盘上是以什么 形式保存的？如果你可以回答出这些问题，那代表这方面的知识体系自上而下已经打通了。

成熟的、成体系的技术栈

![mq_personal_knowledge]( https://github.com/yumushui/database/tree/master/message_queue/message_queue_master_class/mq_personal_knowledge.jpg  "mq_personal_knowledge")





